import {takeEvery, call, put} from 'redux-saga/effects';
import {
  GET_LATEST_EXCHANGE_RATES,
  FETCHING_LATEST_EXCHANGE_RATES_SUCCESS,
  FETCHING_LATEST_EXCHANGE_RATES_FAILURE,
} from '../actionTypes';
import { getRequestApi } from '../../services'

function* fetchLatestExchangesRatesSaga(action) {
    const { payload } = action
    const { apiUrl } = payload
  try {
    const response = {
      "success": true,
      "timestamp": 1636655163,
      "base": "EUR",
      "date": "2021-11-11",
      "rates": {
        "AED": 4.204963,
        "AFN": 104.952417,
        "ALL": 122.32368,
        "AMD": 544.444649,
        "ANG": 2.062341,
        "AOA": 683.36355,
        "ARS": 114.7117,
        "AUD": 1.570012,
        "AWG": 2.061307,
        "AZN": 1.949154,
        "BAM": 1.951581,
        "BBD": 2.310456,
        "BDT": 98.17192,
        "BGN": 1.953376,
        "BHD": 0.431622,
        "BIF": 2277.910593,
        "BMD": 1.144852,
        "BND": 1.54964,
        "BOB": 7.902963,
        "BRL": 6.196632,
        "BSD": 1.144304,
        "BTC": 0.000017661349,
        "BTN": 85.27808,
        "BWP": 13.107815,
        "BYN": 2.785835,
        "BYR": 22439.10816,
        "BZD": 2.306565,
        "CAD": 1.441231,
        "CDF": 2301.153641,
        "CHF": 1.054718,
        "CLF": 0.032939,
        "CLP": 908.87527,
        "CNY": 7.316291,
        "COP": 4440.882681,
        "CRC": 735.317418,
        "CUC": 1.144852,
        "CUP": 30.33859,
        "CVE": 110.025455,
        "CZK": 25.227393,
        "DJF": 203.46339,
        "DKK": 7.437305,
        "DOP": 64.814282,
        "DZD": 158.635297,
        "EGP": 17.995132,
        "ERN": 17.174205,
        "ETB": 54.442022,
        "EUR": 1,
        "FJD": 2.395661,
        "FKP": 0.839431,
        "GBP": 0.85675,
        "GEL": 3.605898,
        "GGP": 0.839431,
        "GHS": 7.001556,
        "GIP": 0.839431,
        "GMD": 59.703743,
        "GNF": 10962.233312,
        "GTQ": 8.851244,
        "GYD": 239.450766,
        "HKD": 8.921435,
        "HNL": 27.590989,
        "HRK": 7.512536,
        "HTG": 113.591352,
        "HUF": 365.265183,
        "IDR": 16335.499013,
        "ILS": 3.570577,
        "IMP": 0.839431,
        "INR": 85.081829,
        "IQD": 1669.556131,
        "IRR": 48358.567321,
        "ISK": 150.399707,
        "JEP": 0.839431,
        "JMD": 177.94073,
        "JOD": 0.811723,
        "JPY": 130.586457,
        "KES": 128.10646,
        "KGS": 97.083333,
        "KHR": 4660.494002,
        "KMF": 486.390387,
        "KPW": 1030.366868,
        "KRW": 1351.017908,
        "KWD": 0.345849,
        "KYD": 0.953553,
        "KZT": 491.867711,
        "LAK": 12063.341379,
        "LBP": 1730.746981,
        "LKR": 231.194668,
        "LRD": 167.836681,
        "LSL": 17.264234,
        "LTL": 3.380452,
        "LVL": 0.69251,
        "LYD": 5.215445,
        "MAD": 10.44017,
        "MDL": 20.086269,
        "MGA": 4548.652301,
        "MKD": 61.482217,
        "MMK": 2032.968332,
        "MNT": 3263.887858,
        "MOP": 9.185981,
        "MRO": 408.71213,
        "MUR": 49.462993,
        "MVR": 17.688294,
        "MWK": 934.115004,
        "MXN": 23.481599,
        "MYR": 4.771717,
        "MZN": 73.075757,
        "NAD": 17.264614,
        "NGN": 470.099139,
        "NIO": 40.314011,
        "NOK": 9.936564,
        "NPR": 136.445127,
        "NZD": 1.632359,
        "OMR": 0.440742,
        "PAB": 1.144304,
        "PEN": 4.611101,
        "PGK": 4.018686,
        "PHP": 57.312488,
        "PKR": 198.86178,
        "PLN": 4.6305,
        "PYG": 7850.003537,
        "QAR": 4.168384,
        "RON": 4.945532,
        "RSD": 117.467992,
        "RUB": 82.144265,
        "RWF": 1166.869522,
        "SAR": 4.293522,
        "SBD": 9.191983,
        "SCR": 15.769656,
        "SDG": 501.445396,
        "SEK": 9.977961,
        "SGD": 1.550725,
        "SHP": 1.576917,
        "SLL": 12501.78862,
        "SOS": 670.883607,
        "SRD": 24.636649,
        "STD": 23696.134415,
        "SVC": 10.012408,
        "SYP": 1439.04751,
        "SZL": 17.47675,
        "THB": 37.562596,
        "TJS": 12.91588,
        "TMT": 4.006984,
        "TND": 3.246781,
        "TOP": 2.577693,
        "TRY": 11.337222,
        "TTD": 7.768654,
        "TWD": 31.861815,
        "TZS": 2634.305634,
        "UAH": 29.853803,
        "UGX": 4039.382261,
        "USD": 1.144852,
        "UYU": 49.806644,
        "UZS": 12283.017735,
        "VEF": 244804055454.44672,
        "VND": 25928.046023,
        "VUV": 128.562847,
        "WST": 2.950277,
        "XAF": 654.537675,
        "XAG": 0.04541,
        "XAU": 0.000615,
        "XCD": 3.094021,
        "XDR": 0.812039,
        "XOF": 654.53197,
        "XPF": 118.435228,
        "YER": 286.499215,
        "ZAR": 17.523215,
        "ZMK": 10305.051682,
        "ZMW": 19.991196,
        "ZWL": 368.642024
      }
    }//yield call(getRequestApi, apiUrl);
    yield put({type: FETCHING_LATEST_EXCHANGE_RATES_SUCCESS, data: response});
  } catch (e) {
    yield put({type: FETCHING_LATEST_EXCHANGE_RATES_FAILURE});
  }
}

function* exchangeRatesSaga() {
  yield takeEvery(GET_LATEST_EXCHANGE_RATES, fetchLatestExchangesRatesSaga);
}

export default exchangeRatesSaga;
